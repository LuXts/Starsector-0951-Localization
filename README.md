# Starsector-0951-Localization

本项目为《远行星号》游戏的中文翻译项目。

目前正在进行的是游戏 **0.95.1a** 版本的汉化，目前进展顺利，主要的剩余任务是对 rules.csv
的翻译和校对工作。

## 下载汉化

**警告：目前汉化工作仍未完成，使用测试版汉化包可能造成游戏不稳定**

**注意：本汉化包仅适用于 0.95.1a-RC6 版本**

如果您希望抢先体验汉化内容，请参照如下步骤下载汉化：

1. 下载汉化文件
   1. [点这里下载0.95.1汉化文件](https://github.com/TruthOriginem/Starsector-0951-Localization/archive/refs/heads/main.zip)
      1. [点这里下载0.95汉化文件](https://github.com/TruthOriginem/Starsector-0951-Localization/archive/refs/tags/0.95-1.0.0.zip)
   3. 解压下载的文件，其中应包括名为`localization`的文件夹
2. 安装汉化文件
   1. 打开游戏目录下的`starsector-core`文件夹
   2. 将下载解压文件中`localization`文件夹内的全部内容复制到`starsector-core`文件夹中
      1. 如提示文件已存在，请选择【覆盖】
3. 正常游玩，**如果遇到翻译质量问题或bug，请及时向我们报告**
   1. 由于0.95版本汉化已经结束，请不要报告0.95汉化包存在的问题

## 参与汉化

如希望参与汉化，请加入远星汉化组，并使用Paratranz平台进行翻译：

1. 通过 QQ 553816216 添加 **议长** 的好友，或者申请加入QQ群 788249918 **汉化顾问团**，添加好友/申请入群时**请注明你的来历和英语水平**。
2. 参照[这个指南](docs/tut_translator.md)使用Paratranz平台进行翻译

## 译文格式规范

### 通用规则

- **多段文本，每段结尾加一个英文空格**
- 如在 Paratranz 上进行翻译，**请使用`^n`替代`\n`**
- 需根据译文内容应用下面的**特殊规则**

#### 避免文本溢出（段尾空格）

- 如果文本包含多个段落，则除最后一段，**前面每段最后加一个英文空格**
    - 在应用无空格规则时，该空格不使用`}`替换
- 如果出现行末文本溢出（或被截断）的情况：
    - 在被截断部分前添加**一个回车**
    - 该回车前**不加段尾空格**

#### 空格

- 中英文之间空格
- token 前后空格
- 人名，地名，专有名词或需要强调的词组前后空格
    - 例：`舰长}Peter}在一次战斗中取得了胜利。`
    - 例：`前往}Galatia}学院接受任务。`
    - 例：`发送你的}PID}到目标处。`
    - 但在如果标点符号前，则不用添加后面的`}`。
        - 例：`目标是}Jangala}!` 改为 `目标是}Jangala!`
- **不能连续空格**
    - 例：`天哪!}}$heOrShe}是谁` 改为 `天哪!}$heOrShe}是谁`
- 连续的标点中间不空格
    - 例：`}"啊，是您!}"}` 改为 `}"啊，是您!"}`
    - 例：`卢德难道不是为此而死的吗?}!}` 改为 `卢德难道不是为此而死的吗?!}`
- 段首不空格
    - 例：(段首)`}Gargoyle}目瞪口呆地看着你` 改为 (段首)`Gargoyle}目瞪口呆地看着你`

#### 标点符号

- `！？：；`改为`!?:;`，并在后面加一个空格
- 圆括号使用`()`，并在括号外前后空格
- 方括号使用`[]`，并在括号外前后空格
- 单引号(`‘’`)和双引号(`“”`)改为直引号(`'`和`"`)，并在前后引号外加空格
- 省略号或表示停顿使用三个英文句号(`...`)
- 中文破折号使用`——`，并在前后添加空格
- 连字符使用`-`，并在前后添加空格
    - 例：`典范-级` 改为 `典范}-}级`

#### Token

- token指以`$`开头的特殊词语，其内容在游戏运行过程中由系统动态替换。
- `$heOrShe`将会被系统替换成`他`或者`她`。
- `$hisOrHer`**也会被系统替换成`他`或者`她`**。
    - 如果需要翻译成`他的`或者`她的`，请写成`$hisOrHer的`。

### ParaTranz 平台规则

- 由于平台机制原因，我们规定所有的`\n`必须使用`^n`进行替代。
    - 例：`AddText "\"很好。感谢你的努力。\""\nCallEvent` 
    - 改为
      `AddText "\"很好。感谢你的努力。\""^nCallEvent`。
- 请注意这个`\n`**不是换行**，是文本中直接出现的两个字符。换行无需特殊处理。
- 该情况目前只出现在`rules.csv`的`script`列中。

### 特殊规则

由于游戏排版系统的限制，在上述规则的基础上，需要根据译文内容额外套用下列两套规则之一：

- **含空格规则**：如果译文中**存在可能被替换为含空格内容的token**，主要是人名和地名(例：`$market`)， 则套用含空格规则。
- **无空格规则**：如果译文中不含token，或token内容不可能包含空格，则套用无空格规则。

| 译文元素   | 含空格规则           | 无空格规则                   |
|--------|-----------------|-------------------------|
| 空格表示   | 使用英文空格          | 除了段尾空格，其它空格替换成后花括号(`}`) |
| 逗号句号   | 使用英文逗号句号，其后添加空格 | 使用中文逗号句号，不加空格           |
| 长无空格句子 | 需插入空格断开         | 不需插入空格                  |

#### 含空格规则

- 如果出现**长无空格句子**，则需要在其中插入空格断开
  - 避免出现连续超过8个汉字无空格的句子
  - 空格不要插在词语内部
  - 可以插在逻辑转折处，词语之间，介词前后

#### 特殊规则示例

|含空格规则     |无空格规则     |
|-----|-----|
|`您好, $player.firstName. 我是被指派管理 $market 的 贝塔级 AI, 现将自己 上传到 您的系统, 以便进行 实时对话.`|`您好，$player.firstName。我是被指派管理}$market}的贝塔级}AI，现将自己上传到您的系统，以便进行实时对话。`     |


## 译名表

请参见[远行星号术语参考表](https://paratranz.cn/projects/3489/terms)

## 项目管理

### 文件夹结构

* "版本号 + data"是游戏各个版本原始的 data 文件夹
* "original" 内存放当前版本的英文原文，不要改动
* "localization" 内存放当前版本的译文
* "para_tranz" 内存放Paratranz平台相关脚本
* "docs" 内存放项目文档内容

### 自动化脚本

**Python环境: 3.8.5**

| 文件                  | 作用                                                    |
|-----------------------|-------------------------------------------------------|
| handleVariantNames.py | 处理指定文件夹中所有装配名，并更新/使用映射 json 用于翻译。                     |
| swapLangFile.py       | 用来更替汉化文件和英文文件的脚本。                                     |
| FindDifference.py     | 查找不同版本之间的差异。                                          |
| variant_name_map.json | 装配名映射文件，英文名对应汉化名，可后继继续更新。                             |
| para_tranz.py         | 用于ParaTranz平台的数据导入导出工具，使用方法参见[本指南](docs/tut_admin.md) |

### 版本汉化流程

![][flow-chart]

[flow-chart]:docs/flow_chart.png
